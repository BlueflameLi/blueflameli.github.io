import{_ as o}from"./ValaxyMain.vue_vue_type_script_setup_true_lang.CefZrO8y.js";import"./chunks/pinia.DsHLo5tT.js";import{e as c,u as g,a as C}from"./chunks/vue-router.Ffbtoo0e.js";import{a7 as y,a8 as u,an as l,V as B,am as t,af as s,aj as i,Z as b}from"./framework.DZImrh0B.js";import"./app.CbS7z7wV.js";import"./chunks/dayjs.BdcnXKr1.js";import"./chunks/vue-i18n.DOs4xXBl.js";/* empty css                    */import"./chunks/nprogress.B6x19dEb.js";import"./content.iwmwugc9.js";import"./router.-rV2tM5K.js";const m=c("/posts/2024-04-06-442",async e=>JSON.parse('{"title":"Centos7 安装 Node18","description":"","frontmatter":{"title":"Centos7 安装 Node18","date":"2024-04-06","updated":"2024-04-06","categories":["各种折腾","我也不知道要分到哪类"],"tags":["Centos7","Node18","Glibc"]},"headers":[],"relativePath":"pages/posts/2024-04-06-442.md","lastUpdated":1757080456000}'),{lazy:(e,n)=>e.name===n.name}),X={__name:"2024-04-06-442",setup(e,{expose:n}){const{data:k}=m(),d=C(),r=g(),h=Object.assign(r.meta.frontmatter||{},k.value?.frontmatter||{});return d.currentRoute.value.data=k.value,b("valaxy:frontmatter",h),globalThis.$frontmatter=h,n({frontmatter:{title:"Centos7 安装 Node18",date:"2024-04-06",updated:"2024-04-06",categories:["各种折腾","我也不知道要分到哪类"],tags:["Centos7","Node18","Glibc"]}}),(a,p)=>{const F=o;return u(),y(F,{frontmatter:B(h)},{"main-content-md":l(()=>[...p[0]||(p[0]=[s("p",null,"[info]久违的更新，之前是做老师那的项目比较忙，之后是准备秋招，再之后是准备考研，研一上嘛又因为比较摆，没什么能写的内容，这篇的内容其实也是半年前就写好初稿了，只是后面忘了来着[/info]",-1),s("p",null,"centos7 因为 glibc 版本太低无法安装 node18，如果想要在 centos7 上使用 node18 就只能自行升级这些库了",-1),s("p",null,"[danger]需要注意的是，glibc 这种属于系统比较底层的库，自行升级有极大的风险，建议除非必须在 Centos 7 上使用 Node18，否则请勿轻易尝试，建议多找些教程对比使用，尽管以下步骤我是成功在两台服务器上尝试过，都没出现问题，但不排除是我没有发现和遇到[/danger]",-1),s("p",null,"首先是安装一些前置的库",-1),s("div",{class:"language-shell"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yum"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," bison"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -y")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yum"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -y"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," wget"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," bzip2"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," gcc"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," gcc-c++"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," glibc-headers")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"然后就是升级下make",-1),s("div",{class:"language-shell"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wget"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," http://ftp.gnu.org/gnu/make/make-4.2.1.tar.gz")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tar"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -zxvf"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," make-4.2.1.tar.gz")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," make-4.2.1")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mkdir"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," build")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," build")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"."),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"./configure"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --prefix=/usr/local/make"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," && "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," && "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," PATH"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"/usr/local/make/bin:$PATH")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ln"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -s"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /usr/local/make/bin/make"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /usr/local/make/bin/gmake")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," #查看下版本是否升级成功")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"然后是升级 gcc 版本",-1),s("div",{class:"language-shell"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yum"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -y"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," devtoolset-8-gcc"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," devtoolset-8-gcc-c++"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," devtoolset-8-binutils")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"echo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "source /opt/rh/devtoolset-8/enable"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," >>"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/profile")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"source"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/profile")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"gcc"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --version"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 查看 gcc 版本")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("div",{class:"language-shell"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wget"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://ftp.gnu.org/gnu/glibc/glibc-2.28.tar.xz")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"xz"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," glibc-2.28.tar.xz")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tar"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -xvf"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," glibc-2.28.tar")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," glibc-2.28")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mkdir"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," build")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,[i("在编译开始前，最好修改 "),s("code",null,"scripts/test-installation.pl"),i(" 在其中添加图中代码，以避免编译 nss_test2 报错")],-1),s("figure",null,[s("img",{src:"https://img.blueflame.org.cn/images/2024/04/06/66110dfa8d637.png",alt:"截屏2023-11-22 15.10.44",loading:"lazy",decoding:"async",class:"lazy"})],-1),s("div",{class:"language-shell"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /root/glibc-2.28/build")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"."),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"./configure"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --prefix=/usr"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --disable-profile"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --enable-add-ons"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --with-headers=/usr/include"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --with-binutils=/usr/bin"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --enable-obsolete-nsl")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"需要注意的是如果上面 make 时有关于 make 或 gcc 版本相关的报错，请重新检查 make 和 gcc 的版本，有时候会因为各种莫名其妙的问题导致用的还是旧版的，此时可以尝试重新执行 install 之后的那两步，重新配置环境变量，确保版本没问题",-1),s("p",null,"更新之后，如果重新打开终端可能会有一些字符集相关的 warning，所以需要在继续在build目录下执行以下代码，安装字符集",-1),s("div",{class:"language-shell"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"make"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," localedata/install-locales")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"经过上面的步骤你就能够使用宝塔面板安装node了，但是运行 node 会发现有报错，类似以下这种",-1),s("div",{class:"language-shell"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"node:"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /lib64/libstdc++.so.6:"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," version"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," `"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"CXXABI_1.3.9' not found")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"你还需要升级 libstdc 库才能正常使用",-1),s("div",{class:"language-shell"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," wget"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," http://www.vuln.cn/wp-content/uploads/2019/08/libstdc.so_.6.0.26.zip")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"unzip"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," libstdc.so_.6.0.26.zip")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cp"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," libstdc++.so.6.0.26"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /lib64/")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /lib64")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 把原来的命令做备份")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cp"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," libstdc++.so.6"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," libstdc++.so.6.bak")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"rm"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -f"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," libstdc++.so.6")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 重新链接")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ln"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -s"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," libstdc++.so.6.0.26"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," libstdc++.so.6")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("div",{class:"language-shell"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"strings"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /usr/lib64/libstdc++.so.6"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," grep"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," GLIBCXX"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," #查看是否安装成功")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"之后你就可以正常的使用 node18 了",-1)])]),"main-header":l(()=>[t(a.$slots,"main-header")]),"main-header-after":l(()=>[t(a.$slots,"main-header-after")]),"main-nav":l(()=>[t(a.$slots,"main-nav")]),"main-content-before":l(()=>[t(a.$slots,"main-content-before")]),"main-content":l(()=>[t(a.$slots,"main-content")]),"main-content-after":l(()=>[t(a.$slots,"main-content-after")]),"main-nav-before":l(()=>[t(a.$slots,"main-nav-before")]),"main-nav-after":l(()=>[t(a.$slots,"main-nav-after")]),comment:l(()=>[t(a.$slots,"comment")]),footer:l(()=>[t(a.$slots,"footer")]),aside:l(()=>[t(a.$slots,"aside")]),"aside-custom":l(()=>[t(a.$slots,"aside-custom")]),default:l(()=>[t(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{X as default,m as usePageData};
