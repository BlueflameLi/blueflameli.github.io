import{_ as K}from"./SakuraPage.vue_vue_type_style_index_0_lang.BeBRoFj3.js";import{_ as N}from"./SakuraPostList.Bixi4go9.js";import"./chunks/pinia.DsHLo5tT.js";import{a as T,u as z}from"./chunks/vue-router.Ffbtoo0e.js";import{c as D,e as U,g as j,a as M,h as O,b as W,d as F}from"./app.CbS7z7wV.js";import{x as R,M as $,K as S,R as G,a9 as B,ab as l,a8 as t,P as k,af as _,ac as b,ak as C,V as d,ah as q,a7 as g,an as y,T as h,a6 as H,ai as J,am as P}from"./framework.DZImrh0B.js";import"./chunks/dayjs.BdcnXKr1.js";import{u as V}from"./chunks/vue-i18n.DOs4xXBl.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.CxZyKCwr.js";import"./SakuraImageCard.CmXbFdlh.js";import"./SakuraPostDate.o_QR3x7e.js";/* empty css                    */import"./chunks/nprogress.B6x19dEb.js";function Q(m){const i=R(!1),{top:u}=D(m);return U(m,([{isIntersecting:o}])=>{i.value=o}),{show:()=>{i.value||window.scrollTo(0,u.value)}}}const X={class:"category-list-item inline-flex cursor-pointer items-center"},Y={key:0,"i-ri-folder-add-line":""},Z={key:1,style:{color:"var(--sakura-c-primary)"},"i-ri-folder-reduce-line":""},I={key:0},ee={m:"l-1",font:"serif black"},te=$({__name:"SakuraCategory",props:{parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(m){const i=m,u=T(),a=z(),o=S(()=>{const e=a.query.category||"";return Array.isArray(e)?[e]:e.split("/")}),c=R(i.collapsable),{t:p}=V(),{locale:f}=V();function n(e){const s=f.value==="zh-CN"?"zh":f.value;return e[`title_${s}`]?e[`title_${s}`]:e.title}const v=R(),{show:w}=Q(v);function L(e){u.push({query:{category:e}}),w()}return G(()=>{const e=document.querySelector(".post-collapse-container");e&&(v.value=e)}),(e,s)=>{const x=B("SakuraCategory",!0),A=B("RouterLink");return t(),l(k,null,[_("li",X,[_("span",{class:"folder-action inline-flex",onClick:s[0]||(s[0]=r=>c.value=!c.value)},[c.value?(t(),l("div",Y)):(t(),l("div",Z))]),_("span",{class:"category-name",m:"l-1",onClick:s[1]||(s[1]=r=>L(e.parentKey))},C(e.category.name==="Uncategorized"?d(p)("category.uncategorized"):e.category.name)+" ["+C(e.category.total)+"] ",1)]),c.value?b("v-if",!0):(t(),l("ul",I,[(t(!0),l(k,null,q(e.category.children.values(),(r,E)=>(t(),l("li",{key:E,class:"sakura-sidebar-item",m:"l-4 y-1"},[d(j)(r)?(t(),g(x,{key:0,"parent-key":e.parentKey?`${e.parentKey}/${r.name}`:r.name,category:r,collapsable:!o.value.includes(r.name)},null,8,["parent-key","category","collapsable"])):(t(),l(k,{key:1},[r.title?(t(),g(A,{key:0,to:r.path||"",class:"inline-flex items-center"},{default:y(()=>[s[2]||(s[2]=_("div",{"i-ri-file-text-line":""},null,-1)),_("span",ee,C(n(r)),1)]),_:2},1032,["to"])):b("v-if",!0)],64))]))),128))]))],64)}}}),ae=$({__name:"SakuraCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(m){const i=z(),u=S(()=>{const a=i.query.category||"";return Array.isArray(a)?[a]:a.split("/")});return(a,o)=>{const c=te;return t(!0),l(k,null,q(a.categories.values(),p=>(t(),l("ul",{key:p.name,class:"category-list",m:"l-4"},[h(c,{"parent-key":p.name,category:p,level:a.level+1,collapsable:!u.value.includes(p.name)},null,8,["parent-key","category","level","collapsable"])]))),128)}}}),oe=H(ae,[["__scopeId","data-v-111676b2"]]),se={text:"center",class:"yun-text-light",p:"2"},ne={key:0},re=$({__name:"SakuraCategoriesLayout",setup(m){const i=M(),{t:u}=V(),a=z(),o=S(()=>a.query.category||""),c=O(),p=S(()=>i.postList.filter(n=>n.categories&&o.value!=="Uncategorized"?typeof n.categories=="string"?n.categories===o.value:n.categories.join("/").startsWith(o.value)&&n.categories[0]===o.value.split("/")[0]:!n.categories&&o.value==="Uncategorized"?n.categories===void 0:!1));return(f,n)=>{const v=oe,w=N,L=B("RouterView"),e=K;return t(),g(e,{class:"sakura-categories-page"},{default:y(()=>[h(L,null,{default:y(({Component:s})=>[(t(),g(J(s),null,{"main-content":y(()=>[P(f.$slots,"content",{},()=>[_("div",null,[_("div",se,C(d(u)("counter.categories",Array.from(d(c).children).length)),1),h(v,{categories:d(c).children},null,8,["categories"])])])]),"main-nav-before":y(()=>[P(f.$slots,"posts",{},()=>[o.value?(t(),l("div",ne,[h(w,{w:"full",posts:p.value},null,8,["posts"])])):b("v-if",!0),b(` <SakuraCard v-if="curCategory" class="post-collapse-container" m="t-4" w="full">
            <SakuraPostCollapse w="full" m="b-4" p="x-20 lt-sm:x-5" :posts="posts" />
          </SakuraCard> `)])]),_:3}))]),_:3})]),_:3})}}}),Ce=$({__name:"categories",setup(m){return W([F({"@type":"CollectionPage"})]),(i,u)=>{const a=re;return t(),g(a)}}});export{Ce as default};
