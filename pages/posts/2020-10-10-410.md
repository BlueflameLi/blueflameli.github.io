---
title: 宝塔数据迁移
date: 2020-10-10
updated: 2021-03-02
categories:
  - 各种折腾
  - 网站相关
tags:
  - 宝塔
---

[info]开学后的第一次更新，好像欠了好久了。。。不过反正也没人看，拖更也问题不大[/info]

## 不同服务器之间的迁移

首先，如果你是一台服务器迁移到另一台服务器，那么挺简单的，宝塔自带就有一键数据迁移，照着官方的教程即可，不过可能会因为各种原因失败，那就只能用我后面的方法了

![](https://img.blueflame.org.cn/images/2020/10/migration1-1.png)

## 同一服务器的迁移

我这次就是在同一个服务器上迁移，因为更换系统镜像无法保留原来的数据，又没办法使用上面的一键迁移，那就只能采用最粗暴的方法了，备份再还原。

如果因为各种原因需要清除原来服务器的数据的话，那么可以用这种方法来完成数据的迁移

首先备份网站数据，并下载下来

![](https://img.blueflame.org.cn/images/2020/10/migration2-1.png)

然后同样方法的备份数据库数据

![](https://img.blueflame.org.cn/images/2020/10/migration3-1.png)

如果有ftp的话，应该也是同样的操作，不过我这没有，就不演示了

然后后面的事情就简单了，待服务器重置或者更换系统镜像后，重新安装宝塔面板这里要注意，新的宝塔面板安装运行环境时，最好保持和原有的一样，包括Nginx等框架以及php版本之类的，至少也要比原来的版本高，否则可能会有问题

最后只需要添加站点，然后将网站备份的压缩包在网站根目录解压即可

数据库这边也一样，添加完之后，在这边导入原来的数据

![](https://img.blueflame.org.cn/images/2020/10/migration4-1.png)

## 跨系统迁移的问题

如果你是windows和Linux之间迁移的话，可能会出现中文文件名乱码的问题，这是因为Windows中文编码默认是GBK而Linux和Mac都是UTF-8，最好的解决方法自然是养成好习惯，不用中文的文件名或路径。

如果已经有很多中文文件名但又不想改的话，那么有两个方法，第一个将原有的压缩包用支持选择编码方式的压缩软件解压，第二个方法就是重新压缩成rar等其他压缩格式（貌似这是zip格式的一个bug）再传输。

最后，说一句，Linux服务器真的流畅，之前Windows的服务器，就这么一个网站，负载和cpu已经占了一半多了。。。

![](https://img.blueflame.org.cn/images/2020/10/migration5-1.png)

