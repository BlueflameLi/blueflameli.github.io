---
title: tensorflow安装配置
date: 2020-07-28
updated: 2024-10-10
categories:
  - 学习笔记
  - 学习笔记
  - 深度学习
tags:
  - tensorflow
---

[info]这个其实上个学期就打算写来着，但因为事情比较多，后面就忘了，这次刚好有机会补上[/info]

tensorflow是什么就不用说了吧，下面直接进入正题

本文配置环境为Windows下的，linux下的后续可能会更新

## 安装CUDA和CUDNN

**如果你打算用CPU跑，那么请跳过这部分，如果你不是Nivida的显卡请另行百度**

首先是重中之重，选择合适的CUDA版本，首先你要去判断你的显卡是否有足够的算力，老式的显卡有可能算力不足，无法安装较高的版本，请自行查询。

安装CUDA之前建议先更新一下显卡的驱动，没有驱动的把驱动装上，在设备管理器里找到你的显卡，一般选择自动联网更新即可。

![](https://img.blueflame.org.cn/images/2020/07/tensorflow-1.png)

![](https://img.blueflame.org.cn/images/2020/07/tensorflow-2.png)

你所安装的CUDA版本不能高于这里的驱动版本

![](https://img.blueflame.org.cn/images/2020/07/tensorflow-3.png)

最后你要考虑的是你想要选择的tensorflow版本，高版本的CUDA，可能无法使用低版本的tensorflow（甚至最新版的CUDA都无法使用tensorflow），建议参考下图来选择CUDA版本

![](https://img.blueflame.org.cn/images/2020/07/tensorflow-4.png)上图为windows下

![](https://img.blueflame.org.cn/images/2020/07/tensorflow-5.png)上图为Linux下

如果你打算使用tensorflow1.X的请安装10.0及以下版本

考虑完上面这些后就可以到[官网](https://developer.nvidia.com/cuda-toolkit-archive)下载安装你所需要的版本，安装流程没什么需要注意的，一般默认选项即可。
之后去[官网](https://developer.nvidia.com/rdp/cudnn-download")下载和你CUDA版本对应的CUDNN（下载CUDNN需要自行注册账户）
将下载的压缩包解压后得到的三个文件夹，复制到cuda的安装目录下，如果你是默认的安装路径的话，应该是C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.0，最后的v10.0是你的cuda版本

## 安装Anaconda3

可以选择上[官网]("https://www.anaconda.com/products/individual")下载，官网上只有最新版，如果你想装老版的可以到[这里]("https://repo.anaconda.com/archive/")下 ，也是官方提供的
如果官网下载慢可以选择[清华源]("https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/")
Anaconda的版本貌似只影响安装后的python版本，对后续tensorflow的安装似乎没啥影响（因为虚拟环境里可以自行选择python版本来进行安装），所以安装哪个版本可以自行选择。
**安装基本默认即可，不过下面这两个选项请都勾上，否则需要自己到环境变量里添加路径**

![](https://img.blueflame.org.cn/images/2020/07/tensorflow-6.jpg)

该图片来源网络，如有侵权，请联系删除

## 安装tensorflow

打开Anaconda Prompt，为防止安装报错，建议以管理员身份运行

![](https://img.blueflame.org.cn/images/2020/07/tensorflow-7.png)
如果不会科学上网建议将conda和pip都换成国内源（这里请自行百度），如果会的话，可以打开全局代理

第一步创建环境，中间tensorflow是环境名，可以自行选择，后面是你想安装的python版本，请根据你想安装的tensorflow版本来选择，具体参考最上面的图

```shell
conda create -n tensorflow python=3.6
```

如果需要删除环境（同理tensorflow是你要删除的环境名）

```shell
conda remove -n tensorflow --all
```

第二步激活进入环境

```shell
conda activate tensorflow
```

如需退出环境

```shell
conda deactivate
```

第三步安装tensorflow，这边用pip装和conda装理论上都可以，不过我用pip装的似乎有点问题，所以后来用conda装的，用pip装之前记得先更新一下pip `python -m pip install --upgrade pip `

```shell
conda install tensorflow-gpu==1.15.0
```

如果没有报错的话，可以尝试 `import tensorflow as tf`，如果没有报错，那么一般情况下算是安装成功了。

注意tensorflow从2.0开始不分gpu版和cpu版，因此安装tensorflow 2.x或者安装1.x的cpu版时，请把-gpu去掉

